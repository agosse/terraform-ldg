# Application Task

## Requirements

## Assumptions

The following assumptions have been made:

1. You already have a container image that contains the back-end/API application.
1. The back-end application listens on port 80.
1. You've pushed the container image to the AWS container registry. See [additional documentation](https://docs.aws.amazon.com/AmazonECS/latest/developerguide/docker-basics.html#docker-basics-create-image) for details.
1. You've written your website front-end in static JavaScript/HTML.
1. The front-end website code will be uploaded to the s3 bucket named `fe_bucket_id`.
1. The front-end has been pre-configured to access your back-end API endpoint at the domain name `<api_dns_prefix.zone_name>`.
1. The zone for that domain name is managed in Route53.
1. You have previously set up an ECS environment in your AWS account manually, ie. the ecsAudoscaleRole, ecsServiceRole and ecsInstanceRole IAM policies exist.
1. You've already got SSL certificate(s) generated by or imported into ACM.

## Input Parameters

There are several ways to pass input parameters/variables to Terraform. Please consult [the documentation](https://www.terraform.io/intro/getting-started/variables.html) to determine your preferred method.

| **Parameter Name** | **Value Type** | **Description** |
| ------------------ | -------------- | --------------- |
| `admin_cidr` | *String* | A CIDR block containing the IP address that can SSH into container instances. |
| `api_dns_prefix` | *String* | The DNS prefix associated with your API service. |
| `be_cert_arn` | *String* | The ARN for the SSL certificate that should be used to secure the backend API. |
| `database_name` | *String* | What name you want the database to have. |
| `database_pass` | *String* | The database admin user's password. |
| `database_user` | *String* | The name of the database admin user. |
| `ecr_name` | *String* | The name of your [Elastic Container Registry](https://docs.aws.amazon.com/AmazonECR/latest/userguide/what-is-ecr.html). |
| `ecs_cluster_instance_type` | *String* | The type of AWS instance to use for hosting containers. |
| `fe_bucket_id` | *String* | A globally-unique name for the front-end content s3 bucket. |
| `fe_cert_arn` | *String* | The ARN for the SSL certificate that should be used to secure the frontend. **NOTE:** Because this cert is used by CloudFront, [it needs to exist in the us-east-1 region](https://docs.aws.amazon.com/acm/latest/userguide/acm-regions.html). |
| `fe_content_dir` | *String* | The location of your front end website code. |
| `key_pair_name` | *String* | The name of the key pair to use when launching instances (for SSH access). |
| `region` | *String* | The AWS region for this deployment. |
| `zone_name` | *String* | The name of the Route53 Hosted Zone associated with your API service. |


